{"version":3,"file":"favorites.js","sources":["../src/js/localFavorites.js","../src/js/favorite-recipes.js"],"sourcesContent":["const FAVORITES_KEY = 'favoriteRecipes';\n\n// Tüm favorileri döndürür\nexport function getFavorites() {\n  const favorites = localStorage.getItem(FAVORITES_KEY);\n  return favorites ? JSON.parse(favorites) : [];\n}\n\nexport function addFavorite(recipe) {\n  const favorites = getFavorites();\n  // Tarifin zaten favorilerde olup olmadığını kontrol et\n  if (!favorites.some(fav => fav._id === recipe._id)) {\n    favorites.push(recipe);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n  }\n}\n\nexport function removeFavorite(recipeId) {\n  let favorites = getFavorites();\n  favorites = favorites.filter(recipe => recipe._id !== recipeId);\n  // Güncellenmiş diziyi Local Storage'a kaydet\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n}\n\n// Bir tarifin favori olup olmadığını kontrol eder\nexport function isFavorite(recipeId) {\n  const favorites = getFavorites();\n  return favorites.some(recipe => recipe._id === recipeId);\n}\n","import { fetchRecipeDetails } from '../api/tastyTreatsApi';\nimport { getFavorites, removeFavorite } from '../js/localFavorites';\n\n// DOM elementleri\nconst favoritesContainer = document.querySelector(\n  '#favorite-recipes-container'\n);\nconst placeholder = document.querySelector('.favorites-placeholder');\n\nasync function displayFavorites() {\n  try {\n    // localStorage'dan favorileri al\n    const favoriteInfos = getFavorites();\n\n    // Eğer favori yoksa, placeholder'ı göster\n    if (favoriteInfos.length === 0) {\n      placeholder.classList.remove('hidden');\n      favoritesContainer.classList.add('hidden');\n      favoritesContainer.innerHTML = '';\n      return;\n    }\n\n    //  Her bir ID için API'ye istek atacak bir promise dizisi\n    const fetchPromises = favoriteInfos.map(info =>\n      fetchRecipeDetails(info._id)\n    );\n\n    //  Tüm API isteklerinin tamamlanmasını bekle\n    const favoriteRecipes = await Promise.all(fetchPromises);\n\n    placeholder.classList.add('hidden');\n    favoritesContainer.classList.remove('hidden');\n\n    const recipesMarkup = favoriteRecipes\n      .map(recipe => {\n        const ratingValue = ((recipe.rating || 0) / 5) * 100;\n        const isActive = 'active';\n\n        return `\n        <div class=\"favorite-recipe-card\" data-id=\"${recipe._id}\">\n          <button class=\"heart-btn favorite-heart-btn ${isActive}\" aria-label=\"Remove from favorites\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\n            </svg>\n          </button>\n          \n          <img class=\"favorite-recipe-card-image\" src=\"${\n            recipe.thumb || './path-to-your-placeholder-image.jpg'\n          }\" alt=\"${recipe.title}\" loading=\"lazy\">\n          \n          <div class=\"favorite-recipe-card-details\">\n            <h3 class=\"recipe-title favorite-recipe-title\">${\n              recipe.title || 'No Title'\n            }</h3>\n            <p class=\"recipe-text favorite-recipe-text\">${\n              recipe.description || ''\n            }</p>\n            <div class=\"favorite-recipe-card-footer\">\n              <div class=\"recipe-card-rating rating-box\">\n                <span class=\"rating-value\">${(recipe.rating || 0).toFixed(\n                  1\n                )}</span>\n                <div class=\"rating-stars \" style=\"--rating: ${ratingValue}%\">\n                  <span>★★★★★</span>\n                  <span class=\"stars-filled\">★★★★★</span>\n                </div>\n              </div>\n              <button class=\"see-recipe-btn\" type=\"button\">See recipe</button>\n            </div>\n          </div>\n        </div>`;\n      })\n      .join('');\n\n    favoritesContainer.innerHTML = recipesMarkup;\n  } catch (error) {\n    console.error('Favori tarifler yüklenirken bir hata oluştu:', error);\n    placeholder.textContent =\n      'Tarifler yüklenirken bir sorun oluştu. Lütfen daha sonra tekrar deneyin.';\n    placeholder.classList.remove('hidden');\n    favoritesContainer.classList.add('hidden');\n  }\n}\n\n// Kalp butonuna tıklama olayını yöneten fonksiyon\n\nfunction handleFavoriteRemoval(event) {\n  const heartButton = event.target.closest('.favorite-heart-btn');\n  if (!heartButton) return;\n\n  const recipeCard = heartButton.closest('.favorite-recipe-card');\n  if (!recipeCard) return;\n\n  const recipeId = recipeCard.dataset.id;\n  removeFavorite(recipeId);\n  displayFavorites();\n}\n\ndocument.addEventListener('DOMContentLoaded', displayFavorites);\nfavoritesContainer.addEventListener('click', handleFavoriteRemoval);\n"],"names":["FAVORITES_KEY","getFavorites","favorites","removeFavorite","recipeId","recipe","favoritesContainer","placeholder","displayFavorites","favoriteInfos","fetchPromises","info","fetchRecipeDetails","favoriteRecipes","recipesMarkup","ratingValue","error","handleFavoriteRemoval","event","heartButton","recipeCard"],"mappings":"wDAAA,MAAMA,EAAgB,kBAGf,SAASC,GAAe,CAC7B,MAAMC,EAAY,aAAa,QAAQF,CAAa,EACpD,OAAOE,EAAY,KAAK,MAAMA,CAAS,EAAI,CAAA,CAC7C,CAWO,SAASC,EAAeC,EAAU,CACvC,IAAIF,EAAYD,IAChBC,EAAYA,EAAU,OAAOG,GAAUA,EAAO,MAAQD,CAAQ,EAE9D,aAAa,QAAQJ,EAAe,KAAK,UAAUE,CAAS,CAAC,CAC/D,CClBA,MAAMI,EAAqB,SAAS,cAClC,6BACF,EACMC,EAAc,SAAS,cAAc,wBAAwB,EAEnE,eAAeC,GAAmB,CAChC,GAAI,CAEF,MAAMC,EAAgBR,IAGtB,GAAIQ,EAAc,SAAW,EAAG,CAC9BF,EAAY,UAAU,OAAO,QAAQ,EACrCD,EAAmB,UAAU,IAAI,QAAQ,EACzCA,EAAmB,UAAY,GAC/B,MACD,CAGD,MAAMI,EAAgBD,EAAc,IAAIE,GACtCC,EAAmBD,EAAK,GAAG,CACjC,EAGUE,EAAkB,MAAM,QAAQ,IAAIH,CAAa,EAEvDH,EAAY,UAAU,IAAI,QAAQ,EAClCD,EAAmB,UAAU,OAAO,QAAQ,EAE5C,MAAMQ,EAAgBD,EACnB,IAAIR,GAAU,CACb,MAAMU,GAAgBV,EAAO,QAAU,GAAK,EAAK,IAGjD,MAAO;AAAA,qDACsCA,EAAO,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yDAQnDA,EAAO,OAAS,sCAC5B,UAAoBA,EAAO,KAAK;AAAA;AAAA;AAAA,6DAIlBA,EAAO,OAAS,UACjB;AAAA,0DAECA,EAAO,aAAe,EACvB;AAAA;AAAA;AAAA,8CAGiCA,EAAO,QAAU,GAAG,QAChD,CAClB,CAAiB;AAAA,8DAC6CU,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eASzE,CAAO,EACA,KAAK,EAAE,EAEVT,EAAmB,UAAYQ,CAChC,OAAQE,EAAO,CACd,QAAQ,MAAM,+CAAgDA,CAAK,EACnET,EAAY,YACV,2EACFA,EAAY,UAAU,OAAO,QAAQ,EACrCD,EAAmB,UAAU,IAAI,QAAQ,CAC1C,CACH,CAIA,SAASW,EAAsBC,EAAO,CACpC,MAAMC,EAAcD,EAAM,OAAO,QAAQ,qBAAqB,EAC9D,GAAI,CAACC,EAAa,OAElB,MAAMC,EAAaD,EAAY,QAAQ,uBAAuB,EAC9D,GAAI,CAACC,EAAY,OAEjB,MAAMhB,EAAWgB,EAAW,QAAQ,GACpCjB,EAAeC,CAAQ,EACvBI,GACF,CAEA,SAAS,iBAAiB,mBAAoBA,CAAgB,EAC9DF,EAAmB,iBAAiB,QAASW,CAAqB"}