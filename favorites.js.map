{"version":3,"file":"favorites.js","sources":["../src/js/localFavorites.js","../src/js/favorite-recipes.js"],"sourcesContent":["const FAVORITES_KEY = 'favoriteRecipes';\n\n// Tüm favorileri döndürür\nexport function getFavorites() {\n  const favorites = localStorage.getItem(FAVORITES_KEY);\n  return favorites ? JSON.parse(favorites) : [];\n}\n\nexport function addFavorite(recipe) {\n  const favorites = getFavorites();\n  // Tarifin zaten favorilerde olup olmadığını kontrol et\n  if (!favorites.some(fav => fav._id === recipe._id)) {\n    favorites.push(recipe);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n  }\n}\n\nexport function removeFavorite(recipeId) {\n  let favorites = getFavorites();\n  favorites = favorites.filter(recipe => recipe._id !== recipeId);\n  // Güncellenmiş diziyi Local Storage'a kaydet\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n}\n\n// Bir tarifin favori olup olmadığını kontrol eder\nexport function isFavorite(recipeId) {\n  const favorites = getFavorites();\n  return favorites.some(recipe => recipe._id === recipeId);\n}\n","// Gerekli fonksiyon importları\nimport { removeFavorite, getFavorites } from '../js/localFavorites';\n\n// DOM elementlerini seç\nconst favoritesContainer = document.querySelector(\n  '#favorite-recipes-container'\n);\nconst placeholder = document.querySelector('.favorites-placeholder');\nconst categoriesFilterContainer = document.querySelector('.categories-filter');\n\n// Kategori Filtreleme Butonları\n\nfunction displayCategoryFilters() {\n  const favoriteRecipes = getFavorites();\n  const categories = [\n    ...new Set(favoriteRecipes.map(recipe => recipe.category)),\n  ];\n\n  let buttonsMarkup = `<button class=\"categories-box category-btn active\" type=\"button\">All categories</button>`;\n\n  categories.forEach(category => {\n    buttonsMarkup += `\n      <button class=\"categories-box category-btn\" type=\"button\">\n        ${category}\n      </button>\n      `;\n  });\n\n  categoriesFilterContainer.innerHTML = buttonsMarkup;\n}\n\n// Favori tarifleri ekranda gösteren fonksiyon\nfunction displayFavorites(filterCategory = `All categories`) {\n  let favoriteRecipes = getFavorites();\n\n  if (filterCategory !== `All categories`) {\n    favoriteRecipes = favoriteRecipes.filter(\n      recipe => recipe.category === filterCategory\n    );\n  }\n\n  if (favoriteRecipes.length === 0) {\n    if (filterCategory === `All categories`) {\n      placeholder.classList.remove(`hidden`);\n      favoritesContainer.classList.add(`hidden`);\n      categoriesFilterContainer.classList.add(`hidden`);\n    } else {\n      placeholder.classList.add(`hidden`);\n      favoritesContainer.classList.remove(`hidden`);\n    }\n\n    favoritesContainer.innerHTML = '';\n    return;\n  }\n\n  placeholder.classList.add('hidden');\n  favoritesContainer.classList.remove('hidden');\n  categoriesFilterContainer.classList.remove('hidden');\n\n  const recipesMarkup = favoriteRecipes\n    .map(recipe => {\n      const ratingValue = (recipe.rating / 5) * 100;\n\n      return `\n   <div class=\"favorite-recipe-card\" data-id=\"${recipe._id}\" data-category=\"${\n        recipe.category\n      }\">\n        <button class=\"heart-btn favorite-heart-btn active\" aria-label=\"Remove from favorites\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path>\n            </svg>\n          </button>\n        <img class=\"favorite-recipe-card-image\" src=\"${recipe.thumb}\" alt=\"${\n        recipe.title\n      }\" loading=\"lazy\">\n        <div class=\"favorite-recipe-card-details\">\n            <h3 class=\"recipe-title favorite-recipe-title\">${recipe.title}</h3>\n            <p class=\"recipe-text favorite-recipe-text\">${\n              recipe.description\n            }</p>\n            <div class=\"favorite-recipe-card-footer\">\n                <div class=\"recipe-card-rating rating-box\">\n                   <span class=\"rating-value\">${(recipe.rating || 0).toFixed(\n                     1\n                   )}</span>\n                    <div class=\"rating-stars \" style=\"--rating: ${ratingValue}%\">\n                        <span>★★★★★</span>\n                        <span class=\"stars-filled\">★★★★★</span>\n                    </div>\n                </div>\n                <button class=\"see-recipe-btn\" type=\"button\">See recipe</button>\n            </div>\n        </div>\n      </div>`;\n    })\n    .join('');\n\n  //  Oluşturulan HTML'i sayfaya yerleştir\n  favoritesContainer.innerHTML = recipesMarkup;\n}\n\n// Kalp butonuna tıklama olayını yöneten fonksiyon\nfunction handleFavoriteRemoval(event) {\n  const heartButton = event.target.closest('.favorite-heart-btn');\n  if (!heartButton) return;\n\n  // Tıklanan butonun ait olduğu tarif kartını bul\n  const recipeCard = heartButton.closest('.favorite-recipe-card');\n  if (!recipeCard) return;\n\n  const recipeId = recipeCard.dataset.id;\n  removeFavorite(recipeId);\n\n  const activeCategoryBtn = document.querySelector(`.category-btn.active`);\n  const currentCategory = activeCategoryBtn\n    ? activeCategoryBtn.textContent\n    : 'All categories';\n\n  displayCategoryFilters();\n\n  const newCategoryBtns =\n    categoriesFilterContainer.querySelectorAll('.category-btn');\n  let categoryStillExists = false;\n  newCategoryBtns.forEach(btn => {\n    if (btn.textContent === currentCategory) {\n      btn.classList.add('active');\n      categoryStillExists = true;\n    } else {\n      btn.classList.remove('active');\n    }\n  });\n\n  // Eğer önceki aktif kategori silindiyse \"All categories\"e dön\n  if (!categoryStillExists) {\n    categoriesFilterContainer\n      .querySelector('.category-btn')\n      .classList.add('active');\n    displayFavorites('All categories');\n  } else {\n    displayFavorites(currentCategory);\n  }\n}\n\nfunction handleCategoryFilter(event) {\n  if (!event.target.matches('.category-btn')) return;\n\n  const selectedCategory = event.target.textContent.trim();\n\n  // Tüm butonlardan 'active' sınıfını kaldır\n  categoriesFilterContainer.querySelectorAll('.category-btn').forEach(btn => {\n    btn.classList.remove('active');\n  });\n\n  // Tıklanan butona 'active' sınıfını ekle\n  event.target.classList.add('active');\n\n  // Seçilen kategoriye göre tarifleri göster\n  displayFavorites(selectedCategory);\n}\n\nfunction initializePage() {\n  displayCategoryFilters();\n  displayFavorites();\n}\n\nconst slider = document.querySelector('.categories-filter');\n\nlet isDown = false;\nlet startX;\nlet scrollLeft;\n\nslider.addEventListener('mousedown', e => {\n  isDown = true;\n  slider.classList.add('grabbing');\n  startX = e.pageX - slider.offsetLeft;\n  scrollLeft = slider.scrollLeft;\n});\n\nslider.addEventListener('mouseleave', () => {\n  isDown = false;\n  slider.classList.remove('grabbing');\n});\n\nslider.addEventListener('mouseup', () => {\n  isDown = false;\n  slider.classList.remove('grabbing');\n});\n\nslider.addEventListener('mousemove', e => {\n  if (!isDown) return;\n\n  e.preventDefault();\n\n  const x = e.pageX - slider.offsetLeft;\n  const walk = (x - startX) * 2;\n\n  slider.scrollLeft = scrollLeft - walk;\n});\n\ndocument.addEventListener('DOMContentLoaded', initializePage);\nfavoritesContainer.addEventListener('click', handleFavoriteRemoval);\ncategoriesFilterContainer.addEventListener('click', handleCategoryFilter);\n"],"names":["FAVORITES_KEY","getFavorites","favorites","removeFavorite","recipeId","recipe","favoritesContainer","placeholder","categoriesFilterContainer","displayCategoryFilters","favoriteRecipes","categories","buttonsMarkup","category","displayFavorites","filterCategory","recipesMarkup","ratingValue","handleFavoriteRemoval","event","heartButton","recipeCard","activeCategoryBtn","currentCategory","newCategoryBtns","categoryStillExists","btn","handleCategoryFilter","selectedCategory","initializePage","slider","isDown","startX","scrollLeft","walk"],"mappings":"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"}