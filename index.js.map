{"version":3,"file":"index.js","sources":["../src/api/tastyTreatsApi.js","../src/js/recipes.js"],"sourcesContent":["const BASE_URL = 'https://tasty-treats-backend.p.goit.global/api';\n\n//  Etkinlikler\nexport async function fetchEvents() {\n  const res = await fetch(`${BASE_URL}/events`);\n  return await res.json();\n}\n\n//  Tüm kategorileri getir\nexport async function fetchCategories() {\n  const res = await fetch(`${BASE_URL}/categories`);\n  return await res.json();\n}\n\n//  Filtreli tarifleri getir (opsiyonel parametreler)\nexport async function fetchFilteredRecipes({\n  category = '',\n  page = 1,\n  limit = 6,\n  time = '',\n  area = '',\n  ingredient = '',\n} = {}) {\n  const url = new URL(`${BASE_URL}/recipes`);\n  if (category) url.searchParams.append('category', category);\n  if (page) url.searchParams.append('page', page);\n  if (limit) url.searchParams.append('limit', limit);\n  if (time) url.searchParams.append('time', time);\n  if (area) url.searchParams.append('area', area);\n  if (ingredient) url.searchParams.append('ingredient', ingredient);\n\n  const res = await fetch(url);\n  return await res.json();\n}\n\n//  Popüler tarifleri getir\nexport async function fetchPopularRecipes() {\n  const res = await fetch(`${BASE_URL}/recipes/popular`);\n  return await res.json();\n}\n\n//  Belirli tarifin detayını getir\nexport async function fetchRecipeDetails(recipeId) {\n  const res = await fetch(`${BASE_URL}/recipes/${recipeId}`);\n  return await res.json();\n}\n\n//  Belirli tarife puan ver\nexport async function rateRecipe(recipeId, rating) {\n  const res = await fetch(`${BASE_URL}/recipes/${recipeId}/rating`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ rating }),\n  });\n  return await res.json();\n}\n\n//  Tüm malzemeleri getir\nexport async function fetchIngredients() {\n  const res = await fetch(`${BASE_URL}/ingredients`);\n  return await res.json();\n}\n\n//  Tüm bölgeleri getir\nexport async function fetchAreas() {\n  const res = await fetch(`${BASE_URL}/areas`);\n  return await res.json();\n}\n\n//  Sipariş oluştur\nexport async function createOrder(orderData) {\n  const res = await fetch(`${BASE_URL}/orders`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(orderData),\n  });\n  return await res.json();\n}\n","import { fetchFilteredRecipes } from '../api/tastyTreatsApi.js';\n\nconst recipesContainer = document.querySelector('#recipes-container');\nconst paginationContainer = document.querySelector('#pagination');\n\nlet currentPage = 1;\nlet totalPages = 1;\n\nconst limit = 9;\n\nasync function loadAndDisplayRecipes(page = 1) {\n  try {\n    const response = await fetchFilteredRecipes({ page, limit });\n    const recipes = response.results;\n    totalPages =\n      response.totalPages || Math.ceil(response.totalResults / limit);\n\n    if (!recipes || recipes.length === 0) {\n      recipesContainer.innerHTML = '<p>No recipes found to display.</p>';\n      paginationContainer.innerHTML = '';\n      return;\n    }\n\n    const recipesMarkup = recipes\n      .map(recipe => {\n        return `\n        <div class=\"recipe-card\" data-id=\"${recipe._id}\">\n          <img class=\"recipe-card-image\" src=\"${recipe.thumb}\" alt=\"${\n          recipe.title\n        }\" loading=\"lazy\">\n          <div class=\"recipe-card-content\">\n            <h3 class=\"recipe-card-title\">${recipe.title}</h3>\n            <p class=\"recipe-card-description\">${recipe.description}</p>\n            <div class=\"recipe-card-rating\">\n              <span>${recipe.rating.toFixed(1)}</span>\n            </div>\n            <button class=\"recipe-card-button\" type=\"button\">See recipe</button>\n          </div>\n        </div>\n      `;\n      })\n      .join('');\n\n    recipesContainer.innerHTML = recipesMarkup;\n    renderPagination(totalPages, page);\n  } catch (error) {\n    console.error('An error occurred while loading recipes:', error);\n    recipesContainer.innerHTML =\n      '<p>The recipes could not be loaded. Please try again later.</p>';\n    paginationContainer.innerHTML = '';\n  }\n}\n\nfunction renderPagination(total, current) {\n  let buttonsMarkup = '';\n\n  for (let i = 1; i <= total; i++) {\n    buttonsMarkup += `<button class=\"pagination-btn ${\n      i === current ? 'active' : ''\n    }\" data-page=\"${i}\">${i}</button>`;\n  }\n\n  paginationContainer.innerHTML = buttonsMarkup;\n\n  const allButtons = paginationContainer.querySelectorAll('.pagination-btn');\n  allButtons.forEach(btn => {\n    btn.addEventListener('click', () => {\n      const selectedPage = Number(btn.dataset.page);\n      if (selectedPage !== currentPage) {\n        currentPage = selectedPage;\n        loadAndDisplayRecipes(currentPage);\n      }\n    });\n  });\n}\n\nloadAndDisplayRecipes();\n\nwindow.addEventListener('resize', () => {\n  loadAndDisplayRecipes(currentPage);\n});\n"],"names":["BASE_URL","fetchFilteredRecipes","category","page","limit","time","area","ingredient","url","recipesContainer","paginationContainer","currentPage","totalPages","loadAndDisplayRecipes","response","recipes","recipesMarkup","recipe","renderPagination","error","total","current","buttonsMarkup","i","btn","selectedPage"],"mappings":"0uBAAA,MAAMA,EAAW,iDAeV,eAAeC,EAAqB,CACzC,SAAAC,EAAW,GACX,KAAAC,EAAO,EACP,MAAAC,EAAQ,EACR,KAAAC,EAAO,GACP,KAAAC,EAAO,GACP,WAAAC,EAAa,EACf,EAAI,GAAI,CACN,MAAMC,EAAM,IAAI,IAAI,GAAGR,CAAQ,UAAU,EACzC,OAAIE,GAAUM,EAAI,aAAa,OAAO,WAAYN,CAAQ,EACtDC,GAAMK,EAAI,aAAa,OAAO,OAAQL,CAAI,EAC1CC,GAAOI,EAAI,aAAa,OAAO,QAASJ,CAAK,EAC7CC,GAAMG,EAAI,aAAa,OAAO,OAAQH,CAAI,EAC1CC,GAAME,EAAI,aAAa,OAAO,OAAQF,CAAI,EAC1CC,GAAYC,EAAI,aAAa,OAAO,aAAcD,CAAU,EAGzD,MADK,MAAM,MAAMC,CAAG,GACV,MACnB,CC/BA,MAAMC,EAAmB,SAAS,cAAc,oBAAoB,EAC9DC,EAAsB,SAAS,cAAc,aAAa,EAEhE,IAAIC,EAAc,EACdC,EAAa,EAEjB,MAAMR,EAAQ,EAEd,eAAeS,EAAsBV,EAAO,EAAG,CAC7C,GAAI,CACF,MAAMW,EAAW,MAAMb,EAAqB,CAAE,KAAAE,EAAM,MAAAC,CAAO,CAAA,EACrDW,EAAUD,EAAS,QAIzB,GAHAF,EACEE,EAAS,YAAc,KAAK,KAAKA,EAAS,aAAeV,CAAK,EAE5D,CAACW,GAAWA,EAAQ,SAAW,EAAG,CACpCN,EAAiB,UAAY,sCAC7BC,EAAoB,UAAY,GAChC,MACD,CAED,MAAMM,EAAgBD,EACnB,IAAIE,GACI;AAAA,4CAC6BA,EAAO,GAAG;AAAA,gDACNA,EAAO,KAAK,UAClDA,EAAO,KACR;AAAA;AAAA,4CAEmCA,EAAO,KAAK;AAAA,iDACPA,EAAO,WAAW;AAAA;AAAA,sBAE7CA,EAAO,OAAO,QAAQ,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,OAMvC,EACA,KAAK,EAAE,EAEVR,EAAiB,UAAYO,EAC7BE,EAAiBN,EAAYT,CAAI,CAClC,OAAQgB,EAAO,CACd,QAAQ,MAAM,2CAA4CA,CAAK,EAC/DV,EAAiB,UACf,kEACFC,EAAoB,UAAY,EACjC,CACH,CAEA,SAASQ,EAAiBE,EAAOC,EAAS,CACxC,IAAIC,EAAgB,GAEpB,QAASC,EAAI,EAAGA,GAAKH,EAAOG,IAC1BD,GAAiB,iCACfC,IAAMF,EAAU,SAAW,EAC5B,gBAAeE,CAAC,KAAKA,CAAC,YAGzBb,EAAoB,UAAYY,EAEbZ,EAAoB,iBAAiB,iBAAiB,EAC9D,QAAQc,GAAO,CACxBA,EAAI,iBAAiB,QAAS,IAAM,CAClC,MAAMC,EAAe,OAAOD,EAAI,QAAQ,IAAI,EACxCC,IAAiBd,IACnBA,EAAcc,EACdZ,EAAsBF,CAAW,EAEzC,CAAK,CACL,CAAG,CACH,CAEAE,IAEA,OAAO,iBAAiB,SAAU,IAAM,CACtCA,EAAsBF,CAAW,CACnC,CAAC"}